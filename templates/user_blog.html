{% extends "common_template.html" %}
{% load staticfiles %}

{% block topbar %}{% include "user_sidebar.html" %}{% endblock %}

{% block templ %}

    <div class="ui bottom attached segment">
        <div class="ui grid">
            <div class="left floated nine wide column">
                <div class="ui basic vertical left aligned segment {% if not request.user_agent.is_mobile %}huge_text{% else %}big_text{% endif %}">{{ user.username }}`s blog</div>
            </div>
            <div class="right floated seven wide column">
                <a class="ui segment center_aligned {% if not request.user_agent.is_mobile %}big_text{% else %}mini_text{% endif %}" href="{% url 'post_creation_view' %}">
                    Write post
                </a>
            </div>
        </div>
        <div class="ui clearing divider"></div>
        {% for post in posts %}
            <div class="ui basic padded vertical segment">
                <div class="ui huge header break_word">
                    <a href="{% url 'post_view' post.id %}">
                        {{ post.title }}
                    </a>
                </div>
                By 
                <a class="rank-{{ post.author.rank }}" href="{% url 'user_info' post.author.username %}">
                    {{ post.author.username }}
                </a>
                , {{ post.created }}
                <div class="ui segment markdown">
                    {{ post.text }}
                </div>
            </div>
        {% endfor %}
        {% if posts.count == 0 %}
            <div class="ui huge header">No posts here</div>
        {% else %}
            <div class="ui compact borderless grid menu">
                {% if page > 1 %}
                    <a class="item" href="{% url 'user_blog_view_with_page' user.username page|add:'-1' %}">
                        <i class="fitted angle left icon"></i>
                    </a>
                    <a class="item" href="{% url 'user_blog_view_with_page' user.username 1 %}">
                        1
                    </a>
                {% else %}
                    <a class="disabled item" href="{% url 'user_blog_view_with_page' user.username 1 %}">
                        <i class="fitted angle left icon"></i>
                    </a>
                {% endif %}
                {% if page > 3 %}
                    <a class="item">
                        ...
                    </a>
                {% endif %}
                {% if page > 2 %}
                    <a class="item" href="{% url 'user_blog_view_with_page' user.username page|add:"-1" %}">
                        {{ page|add:"-1" }}
                    </a>
                {% endif %}
                <a class="active item" href="{% url 'user_blog_view_with_page' user.username page %}">
                    {{ page }}
                </a>
                {% if page < page_count|add:"-1" %}
                    <a class="item" href="{% url 'user_blog_view_with_page' user.username page|add:"1" %}">
                        {{ page|add:"1" }}
                    </a>
                {% endif %}
                {% if page < page_count|add:"-2" %}
                    <a class="item">
                        ...
                    </a>
                {% endif %}
                {% if page < page_count %}
                    <a class="item" href="{% url 'user_blog_view_with_page' user.username page_count %}">
                        {{ page_count }}
                    </a>
                    <a class="item" href="{% url 'user_blog_view_with_page' user.username page|add:'1' %}">
                        <i class="fitted angle right icon"></i>
                    </a>
                {% else %}
                    <a class="disabled item" href="{% url 'user_blog_view_with_page' user.username page_count %}">
                        <i class="fitted angle right icon"></i>
                    </a>
                {% endif %}
            </div>
        {% endif %}
    </div>

{% endblock %}